: 20px 0;
}

.flow-item {
background: white;
padding: 20px;
border-radius: 10px;
box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
margin: 10px;
min-width: 150px;
text-align: center;
}

.arrow {
font-size: 2em;
color: #667eea;
margin: 0 10px;
}

.example-section {
background: #e8f4f8;
padding: 30px;
border-radius: 15px;
margin: 30px 0;
}

.tip-box {
background: #fff3cd;
border-right: 5px solid #ffc107;
padding: 20px;
border-radius: 10px;
margin: 20px 0;
font-family: 'Vazir', sans-serif;
}

.tip-box::before {
content: "💡 نکته: ";
font-weight: bold;
color: #856404;
}

.progress-indicator {
position: fixed;
top: 0;
right: 0;
width: 5px;
height: 100%;
background: rgba(255, 255, 255, 0.2);
z-index: 1000;
}

.progress-bar {
width: 100%;
background: linear-gradient(to bottom, #667eea, #764ba2);
transition: height 0.3s ease;
}

/* Footer Styles */
.footer {
background: rgba(255, 255, 255, 0.1);
backdrop-filter: blur(10px);
border-radius: 20px;
padding: 40px;
margin-top: 50px;
text-align: center;
color: white;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.footer h3 {
color: white;
font-size: 1.8em;
margin-bottom: 20px;
}

.footer a {
color: #f0f0f0;
text-decoration: none;
font-weight: bold;
transition: color 0.3s ease;
}

.footer a:hover {
color: #ffd700;
text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.author-info {
background: rgba(255, 255, 255, 0.2);
border-radius: 15px;
padding: 20px;
margin-top: 20px;
font-family: 'Sahel', sans-serif;
}

code {
background: #e9ecef;
padding: 2px 6px;
border-radius: 3px;
font-family: 'Consolas', monospace;
font-size: 0.9em;
direction: ltr;
display: inline-block;
}

@media (max-width: 768px) {
h1 {
font-size: 2em;
}

.content-section {
padding: 20px;
}

.flow-chart {
flex-direction: column;
}

.arrow {
transform: rotate(90deg);
}
}
</style>

<div class="container">
    <header>
        <h1>Model Context Protocol (MCP)</h1>
        <p class="subtitle">راهنمای جامع و کاربردی برای توسعه‌دهندگان</p>
    </header>

    <div class="content-section">
        <div class="intro-box">
            <p>سلام! من امروز می‌خواهم شما را با یکی از جذاب‌ترین و کاربردی‌ترین پروتکل‌های دنیای هوش مصنوعی آشنا کنم.
                MCP یا Model Context Protocol یک استاندارد متن‌باز است که توسط Anthropic توسعه داده شده و قرار است نحوه
                تعامل LLM‌ها با منابع داده و ابزارهای خارجی را متحول کند!</p>
        </div>

        <h2>🎯 MCP چیست و چرا باید به آن اهمیت دهیم؟</h2>
        <p>تصور کنید می‌خواهید Claude یا هر LLM دیگری بتواند مستقیماً به دیتابیس شما متصل شود، فایل‌های محلی را بخواند،
            یا با API‌های مختلف تعامل کند. MCP دقیقاً برای حل این چالش طراحی شده است!</p>

        <div class="feature-grid">
            <div class="feature-card">
                <h3>🔌 اتصال استاندارد</h3>
                <p>یک پروتکل واحد برای اتصال LLM‌ها به هر نوع منبع داده یا ابزار</p>
            </div>
            <div class="feature-card">
                <h3>🛡️ امنیت بالا</h3>
                <p>کنترل دقیق دسترسی‌ها و مجوزها برای حفظ امنیت داده‌ها</p>
            </div>
            <div class="feature-card">
                <h3>🚀 مقیاس‌پذیری</h3>
                <p>قابلیت توسعه آسان و اضافه کردن منابع جدید بدون تغییر در کد اصلی</p>
            </div>
        </div>
    </div>

    <div class="content-section">
        <h2>🏗️ معماری MCP</h2>
        <div class="architecture-diagram">
            <div class="flow-chart">
                <div class="flow-item">
                    <strong>Client Application</strong>
                    <p>(Claude Desktop)</p>
                </div>
                <span class="arrow">→</span>
                <div class="flow-item">
                    <strong>MCP Protocol</strong>
                    <p>(JSON-RPC)</p>
                </div>
                <span class="arrow">→</span>
                <div class="flow-item">
                    <strong>MCP Server</strong>
                    <p>(Python/Node.js)</p>
                </div>
                <span class="arrow">→</span>
                <div class="flow-item">
                    <strong>Data Sources</strong>
                    <p>(DB, Files, APIs)</p>
                </div>
            </div>
        </div>

        <h3>اجزای اصلی MCP:</h3>
        <ul>
            <li><strong>MCP Host:</strong> برنامه‌ای مثل Claude Desktop که از MCP پشتیبانی می‌کند</li>
            <li><strong>MCP Server:</strong> سرویسی که به منابع داده متصل می‌شود و آن‌ها را در دسترس قرار می‌دهد</li>
            <li><strong>Transport Layer:</strong> لایه ارتباطی (معمولاً stdio یا HTTP)</li>
            <li><strong>Protocol Messages:</strong> پیام‌های JSON-RPC برای تبادل اطلاعات</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>🛠️ شروع کار با MCP</h2>

        <h3>1. نصب ابزارهای مورد نیاز</h3>
        <div class="code-block">
            <button class="copy-button"
                    onclick="copyCode(this)">کپی</button>
            <pre># نصب MCP SDK برای Python


pip install mcp

یا برای Node.js

npm install @modelcontextprotocol/sdk


        <h3>2. ایجاد یک MCP Server ساده</h3>
        <p>بیایید یک سرور MCP بسازیم که به دیتابیس PostgreSQL شما متصل می‌شود:</p>

        <div class="code-block">
            <button class="copy-button" onclick="copyCode(this)">کپی</button>
            <pre># blog_mcp_server.py


import asyncio
from mcp.server import Server, stdio_server
from mcp.server.models import InitializationOptions
import asyncpg
import json

class BlogMCPServer:
def init(self):
self.server = Server(“blog-server”)
self.db_pool = None

    # تعریف ابزارها
    @self.server.tool()
    async def get_posts(limit: int = 10, offset: int = 0):
        """دریافت لیست پست‌های وبلاگ"""
        async with self.db_pool.acquire() as conn:
            posts = await conn.fetch(
                "SELECT * FROM posts ORDER BY created_at DESC LIMIT $1 OFFSET $2",
                limit, offset
            )
            return [dict(post) for post in posts]
    
    @self.server.tool()
    async def get_post_by_id(post_id: int):
        """دریافت جزئیات یک پست"""
        async with self.db_pool.acquire() as conn:
            post = await conn.fetchrow(
                "SELECT * FROM posts WHERE id = $1", post_id
            )
            return dict(post) if post else None
    
    @self.server.tool()
    async def search_posts(query: str):
        """جستجو در پست‌ها"""
        async with self.db_pool.acquire() as conn:
            posts = await conn.fetch(
                """SELECT * FROM posts 
                   WHERE title ILIKE $1 OR content ILIKE $1
                   ORDER BY created_at DESC""",
                f"%{query}%"
            )
            return [dict(post) for post in posts]

async def run(self):
    # اتصال به دیتابیس
    self.db_pool = await asyncpg.create_pool(
        'postgresql://user:password@localhost/blog_db'
    )
    
    # اجرای سرور
    async with stdio_server() as (read_stream, write_stream):
        await self.server.run(
            read_stream,
            write_stream,
            InitializationOptions(
                server_name="blog-mcp-server",
                server_version="1.0.0"
            )
        )


if name == “main”:
server = BlogMCPServer()
asyncio.run(server.run())


        <div class="tip-box">
            این سرور MCP می‌تواند مستقیماً با Claude Desktop کار کند و به او اجازه دهد اطلاعات وبلاگ شما را بخواند و جستجو کند!
        </div>
    </div>

    <div class="content-section">
        <h2>⚙️ پیکربندی Claude Desktop</h2>
        <p>برای استفاده از سرور MCP در Claude Desktop، باید فایل پیکربندی را ویرایش کنید:</p>

        <div class="code-block">
            <button class="copy-button" onclick="copyCode(this)">کپی</button>
            <pre># claude_desktop_config.json


{
“mcpServers”: {
“blog-server”: {
“command”: “python”,
“args”: [“path/to/blog_mcp_server.py”],
“env”: {
“DATABASE_URL”: “postgresql://user:password@localhost/blog_db”
}
}
}
}


        <p>محل فایل پیکربندی:</p>
        <ul>
            <li><strong>macOS:</strong> <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
            <li><strong>Windows:</strong> <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
            <li><strong>Linux:</strong> <code>~/.config/Claude/claude_desktop_config.json</code></li>
        </ul>
    </div>

    <div class="content-section">
        <h2>🎨 مثال کاربردی: تبدیل API وبلاگ به MCP</h2>
        
        <div class="example- section">
            <h3>سناریو: وبلاگ Django + React</h3>
            <p>با توجه به پروژه وبلاگی که در حال توسعه آن هستید، می‌توانیم یک سرور MCP جامع بسازیم:</p>

            <div class="code-block">
                <button class="copy-button" onclick="copyCode(this)">کپی</button>
                <pre># advanced_blog_mcp.py


from mcp.server import Server, stdio_server
from mcp.server.models import InitializationOptions
import httpx
import asyncio
from typing import Optional, List, Dict

class AdvancedBlogMCP:
def init(self, api_base_url: str):
self.server = Server(“advanced-blog-server”)
self.api_base_url = api_base_url
self.client = httpx.AsyncClient()

    # مدیریت پست‌ها
    @self.server.tool()
    async def create_post(
        title: str, 
        content: str, 
        tags: List[str] = None,
        category: str = None
    ):
        """ایجاد پست جدید در وبلاگ"""
        data = {
            "title": title,
            "content": content,
            "tags": tags or [],
            "category": category
        }
        response = await self.client.post(
            f"{self.api_base_url}/api/posts/",
            json=data
        )
        return response.json()
    
    @self.server.tool()
    async def update_post(
        post_id: int,
        title: Optional[str] = None,
        content: Optional[str] = None
    ):
        """ویرایش پست موجود"""
        data = {}
        if title: data["title"] = title
        if content: data["content"] = content
        
        response = await self.client.patch(
            f"{self.api_base_url}/api/posts/{post_id}/",
            json=data
        )
        return response.json()
    
    # مدیریت کامنت‌ها
    @self.server.tool()
    async def get_post_comments(post_id: int):
        """دریافت کامنت‌های یک پست"""
        response = await self.client.get(
            f"{self.api_base_url}/api/posts/{post_id}/comments/"
        )
        return response.json()
    
    @self.server.tool()
    async def moderate_comment(
        comment_id: int,
        action: str  # "approve", "reject", "spam"
    ):
        """مدیریت کامنت‌ها"""
        response = await self.client.post(
            f"{self.api_base_url}/api/comments/{comment_id}/moderate/",
            json={"action": action}
        )
        return response.json()
    
    # آمار و تحلیل
    @self.server.tool()
    async def get_analytics():
        """دریافت آمار کلی وبلاگ"""
        response = await self.client.get(
            f"{self.api_base_url}/api/analytics/overview/"
        )
        return response.json()
    
    @self.server.tool()
    async def get_popular_posts(days: int = 7):
        """دریافت پست‌های محبوب"""
        response = await self.client.get(
            f"{self.api_base_url}/api/analytics/popular/",
            params={"days": days}
        )
        return response.json()

استفاده از سرور

async def main():
server = AdvancedBlogMCP(“http://localhost:8000”)
async with stdio_server() as (read_stream, write_stream):
await server.server.run(
read_stream,
write_stream,
InitializationOptions(
server_name=“advanced-blog-mcp”,
server_version=“2.0.0”
)
)

if name == “main”:
asyncio.run(main())




    <div class="content-section">
        <h2>🔒 امنیت در MCP</h2>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h3>احراز هویت</h3>
                <div class="code-block">
                    <button class="copy-button" onclick="copyCode(this)">کپی</button>
                    <pre># استفاده از توکن‌های امن


@self.server.tool()
async def secure_operation(token: str, data: dict):
if not self.verify_token(token):
raise PermissionError(“Invalid token”)
# ادامه عملیات…



            <div class="feature-card">
                <h3>محدودیت دسترسی</h3>
                <div class="code-block">
                    <button class="copy-button" onclick="copyCode(this)">کپی</button>
                    <pre># تعریف سطوح دسترسی


PERMISSIONS = {
“read”: [“get_posts”, “search_posts”],
“write”: [“create_post”, “update_post”],
“admin”: [“delete_post”, “moderate_comment”]
}




        <div class="tip-box">
            همیشه از HTTPS برای ارتباطات شبکه‌ای استفاده کنید و هرگز اطلاعات حساس را در لاگ‌ها ذخیره نکنید!
        </div>
    </div>

    <div class="content-section">
        <h2>🚀 بهترین روش‌ها و نکات پیشرفته</h2>
        
        <h3>1. مدیریت خطا</h3>
        <div class="code-block">
            <button class="copy-button" onclick="copyCode(this)">کپی</button>
            <pre>@self.server.tool()


async def safe_operation(param: str):
try:
result = await risky_operation(param)
return {“success”: True, “data”: result}
except ValidationError as e:
return {“success”: False, “error”: f"Validation failed: {e}“}
except Exception as e:
logger.error(f"Unexpected error: {e}”)
return {“success”: False, “error”: “Internal server error”}


        <h3>2. کش کردن نتایج</h3>
        <div class="code-block">
            <button class="copy-button" onclick="copyCode(this)">کپی</button>
            <pre>from functools import lru_cache


import time

class CachedMCPServer:
def init(self):
self.cache = {}
self.cache_ttl = 300  # 5 minutes

@self.server.tool()
async def get_cached_data(key: str):
    if key in self.cache:
        data, timestamp = self.cache[key]
        if time.time() - timestamp < self.cache_ttl:
            return data
    
    # Fetch fresh data
    data = await fetch_data(key)
    self.cache[key] = (data, time.time())
    return data</pre>
        </div>

        <h3>3. مانیتورینگ و لاگ</h3>
        <div class="code-block">
            <button class="copy-button"
                    onclick="copyCode(this)">کپی</button>
            <pre>import logging


from datetime import datetime

تنظیم لاگر

logging.basicConfig(
level=logging.INFO,
format=‘%(asctime)s - %(name)s - %(levelname)s - %(message)s’
)
logger = logging.getLogger(‘mcp_server’)

@self.server.tool()
async def monitored_operation(params: dict):
start_time = datetime.now()
logger.info(f"Starting operation with params: {params}")

try:
    result = await perform_operation(params)
    duration = (datetime.now() - start_time).total_seconds()
    logger.info(f"Operation completed in {duration}s")
    return result
except Exception as e:
    logger.error(f"Operation failed: {e}")
    raise</pre>
        </div>
    </div>

    <div class="content-section">
        <h2>📚 منابع و مستندات</h2>

        <div class="feature-grid">
            <div class="feature-card">
                <h3>🔗 لینک‌های مفید</h3>
                <ul>
                    <li><a href="https://github.com/anthropics/mcp"
                           target="_blank">مخزن رسمی MCP</a></li>
                    <li><a href="https://modelcontextprotocol.io"
                           target="_blank">مستندات کامل</li>
                </ul>
            </div>

            <div class="feature-card">
                <h3>📖 مطالعه بیشتر</h3>
                <ul>
                    <li>راهنمای توسعه پلاگین‌ها</li>
                    <li>بهینه‌سازی عملکرد MCP</li>
                    <li>یکپارچه‌سازی با سیستم‌های موجود</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="content-section"
         style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <h2 style="color: white; border-bottom-color: white;">🎯 جمع‌بندی</h2>
        <p>MCP یک گام بزرگ در جهت استانداردسازی نحوه تعامل LLM‌ها با دنیای واقعی است. با استفاده از این پروتکل،
            می‌توانید:</p>
        <ul>
            <li>✅ به Claude و سایر LLM‌ها امکان دسترسی امن به داده‌های شما را بدهید</li>
            <li>✅ ابزارهای قدرتمند برای اتوماسیون و تحلیل بسازید</li>
            <li>✅ تجربه کاربری بهتری برای کاربران نهایی فراهم کنید</li>
            <li>✅ از استانداردهای باز و قابل توسعه استفاده کنید</li>
        </ul>

        <div style="text-align: center; margin-top: 30px;">
            <p style="font-size: 1.2em;">آماده‌اید تا اولین سرور MCP خود را بسازید؟ 🚀</p>
        </div>
    </div>

        <!-- Footer Section -->
        <footer class="footer">
            <h3>درباره نویسنده</h3>
            <div class="author-info">
                <p>این راهنما توسط <strong>آراز شاه کرمی</strong> تهیه شده است. من یک توسعه‌دهنده وب و علاقه‌مند به تکنولوژی‌های
                    نوین هستم که به دنبال خلق ابزارها و راهکارهای نوآورانه هستم.</p>
                <p>برای مشاهده پروژه‌ها و ارتباط با من، لطفاً به وب‌سایت شخصی من مراجعه کنید:</p>
                <a href="https://araz.me"
                   target="_blank"
                   class="website-link">🌐 وب‌سایت من: araz.me</a>
            </div>
        </footer>
        </div>
        
        <script>
            // Progress bar functionality
            window.addEventListener('scroll', () => {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                document.getElementById('progressBar').style.height = scrolled + '%';
            });

            // Copy code functionality
            function copyCode(button) {
                const codeBlock = button.parentElement.querySelector('pre');
                const text = codeBlock.textContent;

                navigator.clipboard.writeText(text).then(() => {
                    const originalText = button.textContent;
                    button.textContent = 'کپی شد! ✓';
                    button.style.background = '#28a745';

                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = '#667eea';
                    }, 2000);
                });
            }
        </script>
        </body>
        
        </html>
